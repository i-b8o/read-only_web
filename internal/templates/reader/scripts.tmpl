{{define "scripts" -}}

  <script>
        if (window.addEventListener) { //Firefox only
            window.addEventListener("DOMMouseScroll", function(e) {
                e.preventDefault()
            }, true);
        }
        window.onscroll = function(e) {
            e.preventDefault()
        };


        if (history.scrollRestoration) {
            history.scrollRestoration = 'manual';
        } else {
            window.onbeforeunload = function() {
                window.scrollTo(0, 0);
            }
        }


        function sleep(time) {
            return new Promise((resolve) => setTimeout(resolve, time));
        }

        function getOffset(el) {
            var _x = 0;
            var _y = 0;
            while (el && !isNaN(el.offsetLeft) && !isNaN(el.offsetTop)) {
                _x += el.offsetLeft - el.scrollLeft;
                _y += el.offsetTop - el.scrollTop;
                el = el.offsetParent;
            }
            return {
                top: _y,
                left: _x
            };
        }

        function pxTOvw(value) {
            var w = window,
                d = document,
                e = d.documentElement,
                g = d.getElementsByTagName('body')[0],
                x = w.innerWidth || e.clientWidth || g.clientWidth,
                y = w.innerHeight || e.clientHeight || g.clientHeight;

            var result = (100 * value) / x;
            return result;
        }

        function pxTOvh(value) {
            var w = window,
                d = document,
                e = d.documentElement,
                g = d.getElementsByTagName('body')[0],
                x = w.innerWidth || e.clientWidth || g.clientWidth,
                y = w.innerHeight || e.clientHeight || g.clientHeight;

            var result = (100 * value) / y;
            return result;
        }

        document.getElementById('sixth-header').addEventListener('click', function(event) {
            if (width < 1250) {
                window.location.href = "market://details?id=com.i_rm.big_drop";
            }
            window.location.href = "https://play.google.com/store/apps/details?id=com.i_rm.big_drop";
        });

        document.getElementById('first-header').addEventListener('click', function(event) {
            if (width < 1250) {
                window.location.href = "market://details?id=com.i_rm.big_drop";
            }
            window.location.href = "https://play.google.com/store/apps/details?id=com.i_rm.big_drop";
        });

        var width = (window.innerWidth > 0) ? window.innerWidth : screen.width;
        let _header = document.getElementById("header");
        let _1vh = Math.round(window.innerHeight / 100);
        let _docs = Array.prototype.slice.apply(document.getElementsByClassName("doc"));
        let _phone = document.getElementById("phone-main");
        let _circle = document.getElementById("circle");
        let _h1 = document.getElementById("first-header");
        let _h2 = document.getElementById("second-header");
        let _h3 = document.getElementById("third-header");
        let _h4 = document.getElementById("fourth-header");
        let _h5 = document.getElementById("fifth-header");
        let _h6 = document.getElementById("sixth-header");
        let _dl = document.getElementById("download");
        let _dll = document.getElementById("download-links");
        let _love = document.getElementById("love");
        let _qr = document.getElementById("qr");
        let _prevPos = 0;
        let _qrand = document.getElementById('qrand');
        let _qrandSmall = true;

        document.getElementById('android-qr').onclick = function() {
            _qr.getElementsByTagName("img")[0].src = "assets/images/qrand.svg"
        };
        document.getElementById('huawei-qr').onclick = function() {
            _qr.getElementsByTagName("img")[0].src = "assets/images/qrand.svg"
        };

        _qrand.onclick = function(){
            if (_qrandSmall){
                _qrand.classList.add('animation');
                _qrandSmall = false;
                return;
            }
            _qrand.classList.remove('animation');
            _qrandSmall = true;
        }

        function move1000(element, x, y) {
            element.animate(
                [{
                    transform: 'translate3D(' + x + ', ' + y + ', 0)'
                }, ], {
                    duration: 1000,
                    easing: "linear",
                    fill: "forwards"
                }
            )
        }

        function move500(element, x, y) {
            element.animate(
                [{
                    transform: 'translate3D(' + x + ', ' + y + ', 0)'
                }, ], {
                    duration: 500,
                    easing: "linear",
                    fill: "forwards"
                }
            )
        }

        function trans(element, o) {
            element.animate(
                [{
                    opacity: o
                }, ], {
                    duration: 1000,
                    easing: "linear",
                    fill: "forwards"
                }
            )
        }

        function fastTrans(element, o) {
            element.animate(
                [{
                    opacity: o
                }, ], {
                    duration: 0,
                    easing: "linear",
                    fill: "forwards"
                }
            )
        }


        function move0(element, x, y) {
            element.animate(
                [{
                    transform: 'translate3D(' + x + ', ' + y + ', 0)'
                }, ], {
                    duration: 0,
                    easing: "linear",
                    fill: "forwards"
                }
            )
        }

        function move200(element, x, y) {
            element.animate(
                [{
                    transform: 'translate3D(' + x + ', ' + y + ', 0)'
                }, ], {
                    duration: 200,
                    easing: "linear",
                    fill: "forwards"
                }
            )
        }

        function shrink(element) {
            element.animate(
                [{
                    transform: 'scale(1,1)'
                }, ], {
                    duration: 1000,
                    easing: "linear",
                    fill: "forwards"
                }
            )
        }

        function expand(element) {
            element.animate(
                [{
                    transform: 'scale(4,4)'
                }, ], {
                    duration: 1000,
                    easing: "linear",
                    fill: "forwards"
                }
            )
        }

        function rotateAndMoveForward(element) {
            element.animate(
                [{
                    transform: 'translate(25vw, -20vh) rotate(-90deg)'
                }, ], {
                    duration: 1000,
                    easing: "linear",
                    fill: "forwards"
                }
            )
        }

        function rotateAndMoveBackward(element) {
            element.animate(
                [{
                    transform: 'translate3D(-25vw, 0, 0) rotate(0)'
                }, ], {
                    duration: 1000,
                    easing: "linear",
                    fill: "forwards"
                }
            )
        }



        async function zero() {
            fastTrans(_h1, 0);
            fastTrans(_h2, 0);
            fastTrans(_h3, 0);
            fastTrans(_h4, 0);
            fastTrans(_h5, 0);
            fastTrans(_h6, 0);
            _prevPos = 0;
            _phone.style.top = '56vh';
            _phone.style.position = 'absolute';
            _circle.style.top = '70vh';
            _circle.style.position = 'absolute';

            move200(_h1, "0", "0", "0");
            move500(_phone, "0", "0", "0");
            move500(_circle, "0", "0", "0");
            _docs.forEach(element => {
                move500(element, 0, 0);
            });
            sleep(500).then(() => {
                window.scrollTo(0, 0);
            });
        }



        function first() {
            _prevPos = 1;
            if (width > 1250) {
                move1000(_phone, "-25vw", "0", "0");
                move1000(_circle, "-25vw", "0", "0");
                _phone.style.top = '27vh';
            } else {
                _phone.style.top = '35vh';
            }

            _circle.style.background = "#e2cefa";
            _phone.src = "assets/images/phone_name.png";


            _phone.style.position = 'fixed';
            _circle.style.top = '42vh';
            _circle.style.position = 'fixed';
            _docs.forEach(element => {
                var _left = Number(pxTOvw(getOffset(element).left)) - 25;
                _leftOffSet = _left > 0 ? "-" + _left + "vw" : -_left + "vw";
                var _top = Number(pxTOvh(getOffset(element).top)) - 50;
                _topOffSet = _top > 0 ? "-" + _top + "vh" : -_top + "vh";
                move1000(element, _leftOffSet, _topOffSet);
            });
            fastTrans(_h3, 0);
            fastTrans(_h4, 0);
            fastTrans(_h5, 0);
            fastTrans(_h6, 0);
            move1000(_h2, "0", "0", "0");
            trans(_h1, 1);

            if (width > 1250) {
                move1000(_h1, "0", "-110vh", "0");
            } else {
                move1000(_h1, "0", "-140vh", "0");
            }
        }

        function second() {
            fastTrans(_h4, 0);
            fastTrans(_h5, 0);
            fastTrans(_h6, 0);
            trans(_h1, 0);
            trans(_h3, 0);
            trans(_h2, 1);
            move1000(_h3, "0", "0", "0");
            if (width > 1250) {
                move1000(_h2, "0", "-110vh", "0");
            } else {
                move1000(_h2, "0", "-140vh", "0");
            }
            _circle.style.background = "#fde9dd";
            _phone.src = "assets/images/phone_filters_time.png";
        }

        function third() {
            fastTrans(_h1, 0);
            fastTrans(_h5, 0);
            fastTrans(_h6, 0);
            trans(_h2, 0);
            trans(_h3, 1);
            move1000(_h4, "0", "0", "0");

            if (width > 1250) {
                move1000(_h3, "0", "-110vh", "0");
            } else {
                move1000(_h3, "0", "-140vh", "0");
            }
            _phone.src = "assets/images/phone_filters_min.png";
        }

        function fourth() {
            fastTrans(_h1, 0);
            fastTrans(_h2, 0);
            trans(_h3, 0);
            trans(_h4, 1);
            move1000(_h5, "0", "0", "0");

            if (width > 1250) {
                move1000(_h4, "0", "-110vh", "0");
            } else {
                move1000(_h4, "0", "-140vh", "0");
            }
            _circle.style.background = "#fde9dd";
            _phone.src = "assets/images/phone_filters_sport.png";
        }

        function fifth() {
            trans(_h4, 0);
            trans(_h5, 1);
            move1000(_h6, "0", "0", "0");

            if (width > 1250) {
                move1000(_h5, "0", "-110vh", "0");
            } else {
                move1000(_h5, "0", "-140vh", "0");
            }
            _circle.style.background = "#cee0fb";
            _phone.src = "assets/images/phone_not.png";
        }

        function sixth() {
            if (_prevPos == 7) {
                rotateAndMoveBackward(_phone);
            }
            fastTrans(_dl, 0);
            fastTrans(_dll, 0);
            fastTrans(_love, 0);
            move200(_header, "0", "0", "0");
            move1000(_dl, "0", "0", "0");
            move1000(_dll, "0", "0", "0");
            move1000(_love, "0", "0", "0");

            fastTrans(_h1, 0);
            fastTrans(_h2, 0);
            fastTrans(_h3, 0);
            fastTrans(_h4, 0);

            trans(_h5, 0);
            trans(_h6, 1);

            if (width > 1250) {
                move1000(_h6, "0", "-110vh", "0");
                shrink(_circle);
                move0(_circle, "-25vw", "0", "0");
            } else {
                move1000(_h6, "0", "-140vh", "0");
            }

            _circle.style.background = "#aaeecd";
            _phone.src = "assets/images/phone_event.png";
        }

        function seventh() {
            _prevPos = 7;
            fastTrans(_h6, 0);
            fastTrans(_h1, 0);
            fastTrans(_h2, 0);
            fastTrans(_h3, 0);
            fastTrans(_h4, 0);
            fastTrans(_h5, 0);
            move200(_header, "0", "-110vh", "0");


            expand(_circle);
            rotateAndMoveForward(_phone);

            trans(_dl, 1);
            trans(_dll, 1);
            trans(_love, 1);
            move1000(_dl, "0", "-120vh", "0");
            move1000(_dll, "0", "-80vh", "0");
            move1000(_love, "0", "-52vh", "0");
        }


        document.addEventListener('scroll', function(e) {
            _qrand.classList.remove('animation');
            var _pos = window.scrollY / _1vh;
            if (_pos < 34.5) {
                _prevPos == 1 ? zero() : null;
            } else if (_pos < 80) {
                first();
            } else if (_pos < 160) {
                second();
            } else if (_pos < 240) {
                third();
            } else if (_pos < 320) {
                fourth();
            } else if (_pos < 400) {
                fifth();
            } else if (_pos < 480) {
                sixth();
            } else if (_pos < 560 && width > 1250) {
                seventh();
            }
        });
    </script>
{{end}}